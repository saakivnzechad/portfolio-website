var d=Object.defineProperty;var h=(o,t,e)=>t in o?d(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var s=(o,t,e)=>h(o,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function e(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(a){if(a.ep)return;a.ep=!0;const r=e(a);fetch(a.href,r)}})();const i={storageKey:"appLanguage",defaultLanguage:"en",supportedLanguages:["en","ru"]};let u=null;const c=new Set;function f(){const o=localStorage.getItem(i.storageKey);if(o&&i.supportedLanguages.includes(o))return o;const t=navigator.language.split("-")[0];return i.supportedLanguages.includes(t)?t:i.defaultLanguage}function g(o){if(!i.supportedLanguages.includes(o)){console.warn(`Unsupported language: ${o}. Must be one of ${i.supportedLanguages.join(", ")}.`);return}u!==o&&(u=o,localStorage.setItem(i.storageKey,o),document.documentElement.lang=o,c.forEach(t=>t(o)))}function m(){return u||g(f()),u}function p(o){return c.add(o),()=>c.delete(o)}function L(){return i.supportedLanguages}class y{constructor(t={}){s(this,"config");s(this,"rootElement");s(this,"contentContainer");s(this,"languageToggleButton");s(this,"mobileLanguageToggleButton");s(this,"translationsCache",new Map);s(this,"currentLanguage");this.config={localesPath:t.localesPath??"/locales",defaultLanguage:t.defaultLanguage??"en",languageToggleButtonSelector:t.languageToggleButtonSelector??null,mobileLanguageToggleButtonSelector:t.mobileLanguageToggleButtonSelector??null,contentContainerSelector:t.contentContainerSelector??"body",fadeDuration:t.fadeDuration??200},this.rootElement=document.documentElement,this.contentContainer=this.config.contentContainerSelector?document.querySelector(this.config.contentContainerSelector):null,this.languageToggleButton=this.config.languageToggleButtonSelector?document.querySelector(this.config.languageToggleButtonSelector):null,this.mobileLanguageToggleButton=this.config.mobileLanguageToggleButtonSelector?document.querySelector(this.config.mobileLanguageToggleButtonSelector):null,this.currentLanguage=m()}async initialize(){var t,e;await this.applyTranslations(),p(async n=>{this.currentLanguage=n,await this.applyTranslations()}),(t=this.languageToggleButton)==null||t.addEventListener("click",()=>this.toggleLanguage()),(e=this.mobileLanguageToggleButton)==null||e.addEventListener("click",()=>this.toggleLanguage())}toggleLanguage(){const t=L(),n=(t.indexOf(this.currentLanguage)+1)%t.length;g(t[n])}async applyTranslations(){this.contentContainer&&(this.contentContainer.style.transition=`opacity ${this.config.fadeDuration}ms ease-in-out`,this.contentContainer.style.opacity="0",await new Promise(n=>setTimeout(n,this.config.fadeDuration)));const t=await this._loadTranslations(this.currentLanguage);this.rootElement.lang=this.currentLanguage,document.querySelectorAll("[data-i18n], [data-i18n-attr]").forEach(n=>{this._updateElementText(n,t),this._updateElementAttributes(n,t)}),this._updateButtonLabels(),this.contentContainer&&requestAnimationFrame(()=>{this.contentContainer.style.opacity="1",setTimeout(()=>{this.contentContainer&&(this.contentContainer.style.transition="")},this.config.fadeDuration)})}_updateElementText(t,e){const n=t.getAttribute("data-i18n");if(!n)return;const a=this._getNestedTranslation(n,e);t.textContent=a}_updateElementAttributes(t,e){const n=t.getAttribute("data-i18n-attr");n&&n.split(";").forEach(a=>{const[r,l]=a.split(":");r&&l&&t.setAttribute(r,this._getNestedTranslation(l,e))})}_updateButtonLabels(){const t=this.currentLanguage.toUpperCase();[this.languageToggleButton,this.mobileLanguageToggleButton].forEach(e=>{const n=e==null?void 0:e.querySelector("span:first-of-type");n&&(n.textContent=t)})}async _loadTranslations(t){if(this.translationsCache.has(t))return this.translationsCache.get(t);try{const e=await fetch(`${this.config.localesPath}/${t}.json`);if(!e.ok)throw new Error(`Failed to load translations for ${t}: ${e.statusText}`);const n=await e.json();return this.translationsCache.set(t,n),n}catch(e){return console.error("Error loading translations:",e),t!==this.config.defaultLanguage?this._loadTranslations(this.config.defaultLanguage):{}}}_getNestedTranslation(t,e){return t.split(".").reduce((n,a)=>n&&typeof n=="object"&&a in n?n[a]:null,e)??`[${t}]`}}class b{constructor(t,e,n){s(this,"menu");s(this,"button");s(this,"mainContent");this.menu=t,this.button=e,this.mainContent=n}init(){this.button.addEventListener("click",()=>this.toggle())}toggle(){this.menu.classList.contains("hidden")?this.open():this.close()}open(){this.menu.classList.remove("hidden"),this.menu.offsetWidth,this.menu.classList.remove("translate-y-full"),this.menu.classList.add("translate-y-0"),this.mainContent.classList.add("pointer-events-none")}close(){this.menu.classList.contains("hidden")||(this.menu.classList.add("-translate-y-full"),this.menu.classList.remove("translate-y-0"),this.menu.addEventListener("transitionend",()=>{this.menu.classList.add("hidden"),this.mainContent.classList.remove("pointer-events-none")},{once:!0}))}}class T{initSmoothScroll(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",n=>this.handleAnchorClick(n))})}handleAnchorClick(t){t.preventDefault();const e=t.currentTarget.getAttribute("href");if(!e){console.warn("Anchor element has no href attribute.",t.currentTarget);return}const n=document.querySelector(e);n?n.scrollIntoView({behavior:"smooth",block:"start"}):console.warn(`Target element with ID "${e}" not found.`,t.currentTarget)}}document.addEventListener("DOMContentLoaded",async()=>{const o=document.getElementById("hamburger-button"),t=document.getElementById("mobile-menu"),e=document.querySelector("main");if(!o||!t||!e){console.error("Core UI elements not found. App cannot initialize.");return}const n=new y({localesPath:"locales",defaultLanguage:"en",languageToggleButtonSelector:"#lang-toggle",mobileLanguageToggleButtonSelector:"#lang-toggle-mobile"}),a=new b(t,o,e),r=new T;a.init(),r.initSmoothScroll(),await n.initialize(),t.addEventListener("click",()=>{a.close()})});
